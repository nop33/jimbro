@import 'tailwindcss';

@view-transition {
  navigation: auto;
}

@theme {
  /* Base colors, inspired from https://colorhunt.co/palette/0c0c0c481e149b3922f2613f */
  --color-jim-dark: #0c0c0c;
  --color-jim-dark-blue: #191b1f;
  --color-jim-brown: #481e14;
  --color-jim-primary: #9b3922;
  --color-jim-accent: #f2613f;
  --color-jim-neutral: var(--color-neutral-300);
  --color-jim-neutral-secondary: var(--color-neutral-400);
  --color-jim-neutral-tertiary: var(--color-neutral-500);

  /* Semantic colors */
  --color-jim-error: #9b3922;
  --color-jim-success: #3a7d44;
  --color-jim-warning: #c97a2b;
  --color-jim-info: #3a5a7a;
}

@layer base {
  * {
    @apply border-neutral-700;
  }

  body {
    @apply antialiased bg-black text-jim-neutral;
  }
}

@layer components {
  .app {
    background-attachment: fixed;
  }

  .app-page {
    @apply max-w-2xl mx-auto min-h-screen flex flex-col bg-jim-dark;
  }

  .app-header {
    @apply flex items-center border-b border-neutral-700/50 px-4 py-5;
  }

  .app-header-title {
    @apply text-2xl font-bold text-jim-accent;
  }

  .app-page-content {
    @apply flex flex-col flex-1 px-4 pt-6 pb-4 overflow-y-auto;
  }

  /* Modern button styles */
  .btn-primary {
    @apply px-6 py-3 rounded-xl text-white bg-jim-primary font-semibold shadow-lg hover:scale-101 active:scale-100 transition-all duration-200 hover:bg-jim-accent/70 cursor-pointer;
  }

  .btn-secondary {
    @apply px-6 py-3 rounded-xl font-medium hover:bg-neutral-700 hover:text-white transition-all duration-200 border border-neutral-600/50;
  }

  .btn-danger {
    @apply bg-jim-error text-white;
  }

  /* Modern card styles */
  .card {
    @apply rounded-2xl p-5 py-3 border border-neutral-700/10 bg-jim-dark-blue/50;

    header {
      @apply mb-2 flex items-baseline justify-between;
    }
  }

  .card-condensed {
    @apply p-4 py-2;
  }

  .card-hover {
    @apply hover:border-jim-primary/50 transition-all duration-300;
  }

  .card-clickable {
    @apply hover:border-jim-primary/50 cursor-pointer;
  }

  .card-title {
    @apply text-lg font-bold;
  }

  .card-success {
    @apply border-jim-success/50;
    position: relative;
  }

  .card-success.with-bg {
    @apply bg-jim-success/15;
  }

  .card-success::after {
    @apply bg-jim-success rounded-full flex items-center justify-center w-5 h-5 text-sm font-bold;
    position: absolute;
    top: -0.3rem;
    right: -0.3rem;

    content: '\2713';
    color: white;
  }

  .card-danger {
    @apply bg-jim-error/20 border-jim-error/20;
  }
  .card-warning {
    @apply bg-jim-warning/15 border-jim-warning/20;
  }
  .card-info {
    @apply bg-jim-info/10 border-jim-info/20;
  }
  .card-pending {
    @apply bg-jim-neutral/10 border-dashed border-jim-neutral/20;
  }
  .card-simple {
    background-color: transparent;
  }

  /* Modern input styles */
  input[type='text'],
  input[type='number'],
  select {
    @apply w-full px-4 py-3 rounded-xl border border-neutral-700/50 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 focus:outline-none transition-all duration-200 placeholder:text-neutral-500;
  }

  input[type='text']:hover,
  input[type='number']:hover,
  select:hover {
    @apply border-neutral-600;
  }

  /* Modern link styles */
  .link-primary {
    @apply text-jim-accent/80 hover:text-jim-accent font-medium transition-colors duration-200 flex items-center gap-1 cursor-pointer;
  }

  /* Bottom navigation */
  .bottom-nav {
    @apply bg-neutral-900/95 backdrop-blur-xl border-t border-neutral-700/50;
    box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.3);
  }

  .nav-link {
    @apply relative transition-all duration-200;
  }

  .nav-link.active {
    @apply text-blue-400;
  }

  .nav-link.active::before {
    content: '';
    @apply absolute -top-0.5 left-1/2 -translate-x-1/2 w-12 h-1 rounded-full;
  }

  /* Mobile-first: Ensure touch targets are at least 44x44px */
  button,
  a,
  input,
  select {
    min-height: 44px;
    min-width: 44px;
  }

  /* Smooth scrolling */
  html {
    scroll-behavior: smooth;
  }

  details {
    &[open] {
      summary {
        @apply mb-4;
      }
    }
  }

  summary {
    @apply text-lg cursor-pointer text-jim-primary;
  }

  /* Modern dialog styles */
  dialog {
    @apply rounded-2xl p-8 max-w-md mx-auto my-auto border border-neutral-700/50 bg-jim-dark-blue text-jim-neutral;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
  }

  dialog::backdrop {
    backdrop-filter: blur(8px);
    background: rgba(0, 0, 0, 0.6);
  }

  .dialog-full-screen {
    @apply h-full w-full;
  }

  dialog > header {
    @apply mb-6 flex items-center justify-between;
  }

  .badge {
    @apply inline-block bg-neutral-800 text-jim-accent rounded-full px-3 py-1 text-xs font-semibold tracking-wide;
  }

  /* Section headers */
  .section-header {
    @apply text-xl font-bold mb-4 mt-6 first:mt-0;
  }

  /* Label styles */
  label {
    @apply block text-sm font-semibold mb-2;
  }

  select[multiple] {
    optgroup {
      @apply text-sm font-semibold mb-2;
    }

    option {
      @apply py-2 ml-4 pl-2 text-base;
    }

    option:first-child {
      @apply mt-1;
    }
  }

  /* Sortable list styles */
  .sortable-list {
    @apply list-none p-0 m-0;
  }

  .sortable-item {
    @apply mb-2 px-5 py-4 my-2 bg-neutral-100 rounded font-bold text-[1.1em] text-neutral-800 cursor-grab shadow transition-colors transition-transform duration-200 hover:bg-blue-50 hover:scale-105;
  }

  .dragging {
    @apply opacity-30 scale-95;
  }

  .sortable-item:last-child {
    @apply mb-0;
  }

  .set.isCompleted {
    @apply border-jim-success/50;
  }

  .set.isPending {
    @apply border-jim-neutral/50 border-dashed opacity-50;
  }

  .toast-message-popup {
    @apply bg-jim-dark-blue/50 border border-neutral-700/10 rounded-2xl p-4 py-3 fixed left-1/2 top-4 w-11/12 max-w-md z-50;
    transform: translateX(-50%);

    &.success {
      @apply bg-jim-success border-jim-success/20;
    }

    &.error {
      @apply bg-jim-error border-jim-error/20;
    }

    &.warning {
      @apply bg-jim-warning border-jim-warning/20;
    }

    &.info {
      @apply bg-jim-info border-jim-info/20;
    }
  }
}

/* Respect reduced motion preference */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

@media all and (display-mode: standalone) {
  #install-btn {
    display: none;
  }
}
